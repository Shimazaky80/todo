<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>My Todo App</title>
</head>
<body>
	<input type="text" id="todo-title">
	<input type="date" id="date-picker">
	<button onclick="addTodo()">Add Todo</button>

	<div id="todo-list"></div>

	<script>

		const todos = [
			{
				title: 'Get groceries',
				dueDate: '2022-01-04',
				id: 1
			}, 
		
			{
				title: 'Wash car',
				dueDate: '2022-02-03',
				id: 2
			}, 

			{
				title: 'Make dinner',
				dueDate: '2022-03-04',
				id: 3
			}
		]

		render()

		// function for adding a new task, trigged by 
		// html button click
		function addTodo () {
			// grab html text box id
			const txtbox = document.getElementById('todo-title')
			// save the value typed in the html text box
			const title = txtbox.value

			const datePicker = document.getElementById('date-picker')
			const dueDate = datePicker.value;

			const id = new Date().getTime()

			todos.push({
				title: title,
				dueDate: dueDate,
				id: id
			})

			render()
		}

		function deleteTodo() {
			console.log('delete!')
		}

		function render () {
			// reset our list
			document.getElementById('todo-list').innerText = ''

			// looping through each item in the array
			todos.forEach (
				function(todos) {
					const htmlEl = document.createElement('div')
					htmlEl.innerText = todos.title + ' ' + todos.dueDate

					// creating a button element and appending 
					// to the page
					const deleteBtn = document.createElement('button')
					deleteBtn.innerText = 'Delete'
					deleteBtn.style = 'margin-left: 12px;'
					htmlEl.appendChild(deleteBtn)
					// for any click event on the page
					deleteBtn.onclick = deleteTodo
					deleteBtn.id = todos.id

					const todoList = document.getElementById('todo-list')
					todoList.appendChild(htmlEl)
				}
			)
		}

	</script>
</body>
</html>